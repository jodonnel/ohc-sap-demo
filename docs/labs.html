<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OHC Labs ‚Äî Skunkworks</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600;700&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --red: #CC0000;
    --bg: #0D0D0D;
    --bg2: #141414;
    --bg3: #1A1A1A;
    --border: #2A2A2A;
    --border-bright: #3A3A3A;
    --text: #E8E8E8;
    --text-dim: #888;
    --text-muted: #555;
    --mono: 'JetBrains Mono', monospace;
    --sans: 'Syne', sans-serif;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--mono);
    min-height: 100vh;
    overflow-x: hidden;
  }
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.03) 2px, rgba(0,0,0,0.03) 4px);
    pointer-events: none;
    z-index: 1000;
  }
  header {
    border-bottom: 1px solid var(--border);
    padding: 0 2rem;
    position: sticky;
    top: 0;
    background: rgba(13,13,13,0.95);
    backdrop-filter: blur(8px);
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 56px;
  }
  .header-left { display: flex; align-items: center; gap: 1rem; }
  .logo-bracket { font-size: 0.7rem; color: var(--red); letter-spacing: 0.15em; font-weight: 700; text-transform: uppercase; }
  .logo-sep { width: 1px; height: 20px; background: var(--border-bright); }
  .header-title { font-family: var(--sans); font-size: 0.9rem; font-weight: 700; letter-spacing: 0.05em; }
  .header-right { display: flex; align-items: center; gap: 1.5rem; }
  .header-link { font-size: 0.65rem; color: var(--text-muted); text-decoration: none; letter-spacing: 0.1em; text-transform: uppercase; transition: color 0.2s; }
  .header-link:hover { color: var(--red); }
  .status-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--red); box-shadow: 0 0 6px var(--red); animation: pulse 2s ease-in-out infinite; }
  @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.3} }

  .votes-banner {
    background: var(--bg2);
    border-bottom: 1px solid var(--border);
    padding: 0.6rem 2rem;
    display: flex; align-items: center; justify-content: center; gap: 0.5rem;
    font-size: 0.65rem; color: var(--text-muted); letter-spacing: 0.08em;
  }
  .votes-banner strong { color: var(--red); font-family: var(--sans); font-size: 0.85rem; }

  .hero { padding: 4rem 2rem 3rem; max-width: 1100px; margin: 0 auto; }
  .hero-eyebrow {
    font-size: 0.65rem; color: var(--red); letter-spacing: 0.2em; text-transform: uppercase;
    margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;
  }
  .hero-eyebrow::before { content: '>'; }
  .hero-title {
    font-family: var(--sans); font-size: clamp(2.8rem, 6vw, 5rem);
    font-weight: 800; line-height: 0.95; letter-spacing: -0.02em; margin-bottom: 1.5rem;
  }
  .hero-title .accent { color: var(--red); }
  .hero-desc { font-size: 0.85rem; color: var(--text-dim); line-height: 1.7; max-width: 560px; margin-bottom: 2rem; }
  .hero-meta { display: flex; gap: 2rem; flex-wrap: wrap; }
  .hero-stat { display: flex; flex-direction: column; gap: 0.2rem; }
  .hero-stat-num { font-family: var(--sans); font-size: 1.6rem; font-weight: 800; line-height: 1; }
  .hero-stat-label { font-size: 0.6rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.15em; }

  .filter-bar {
    border-top: 1px solid var(--border); border-bottom: 1px solid var(--border);
    padding: 0.75rem 2rem; display: flex; align-items: center; gap: 0.5rem;
    overflow-x: auto; background: var(--bg2);
  }
  .filter-label { font-size: 0.6rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.15em; white-space: nowrap; margin-right: 0.5rem; }
  .filter-btn {
    font-family: var(--mono); font-size: 0.65rem; color: var(--text-muted);
    background: transparent; border: 1px solid var(--border); padding: 0.3rem 0.75rem;
    cursor: pointer; letter-spacing: 0.05em; white-space: nowrap; transition: all 0.15s; text-transform: uppercase;
  }
  .filter-btn:hover, .filter-btn.active { color: var(--red); border-color: var(--red); background: rgba(204,0,0,0.05); }

  .grid {
    max-width: 1100px; margin: 0 auto; padding: 2.5rem 2rem 4rem;
    display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 1px; background: var(--border); border: 1px solid var(--border);
  }

  .card {
    background: var(--bg); padding: 1.5rem; display: flex; flex-direction: column; gap: 1rem;
    transition: background 0.2s; position: relative; overflow: hidden;
    opacity: 0; transform: translateY(12px); animation: fadeUp 0.4s ease forwards;
  }
  .card:hover { background: var(--bg2); }
  @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }
  .card:nth-child(1){animation-delay:0.05s} .card:nth-child(2){animation-delay:0.10s}
  .card:nth-child(3){animation-delay:0.15s} .card:nth-child(4){animation-delay:0.20s}
  .card:nth-child(5){animation-delay:0.25s} .card:nth-child(6){animation-delay:0.30s}
  .card:nth-child(7){animation-delay:0.35s} .card:nth-child(8){animation-delay:0.40s}
  .card:nth-child(9){animation-delay:0.45s} .card:nth-child(10){animation-delay:0.50s}

  .card::before {
    content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 2px;
    background: var(--red); transform: scaleY(0); transform-origin: bottom; transition: transform 0.25s ease;
  }
  .card:hover::before { transform: scaleY(1); }
  .card.hidden { display: none; }

  .card-header { display: flex; align-items: flex-start; justify-content: space-between; gap: 1rem; }
  .card-num { font-size: 0.6rem; color: var(--red); font-weight: 700; letter-spacing: 0.1em; flex-shrink: 0; margin-top: 0.1rem; }
  .card-title-block { flex: 1; }
  .card-title { font-family: var(--sans); font-size: 1rem; font-weight: 700; line-height: 1.25; margin-bottom: 0.25rem; }
  .card-tagline { font-size: 0.65rem; color: var(--text-muted); line-height: 1.4; font-style: italic; }
  .card-abstract { font-size: 0.72rem; color: var(--text-dim); line-height: 1.75; flex: 1; }

  .card-tags { display: flex; flex-wrap: wrap; gap: 0.35rem; }
  .tag { font-size: 0.55rem; color: var(--text-muted); border: 1px solid var(--border-bright); padding: 0.15rem 0.5rem; letter-spacing: 0.08em; text-transform: uppercase; }

  .card-footer {
    display: flex; align-items: center; justify-content: space-between;
    padding-top: 0.75rem; border-top: 1px solid var(--border); gap: 0.75rem;
  }

  .vote-btn {
    font-family: var(--mono); font-size: 0.65rem; background: transparent;
    border: 1px solid var(--border-bright); color: var(--text-dim); padding: 0.4rem 0.8rem;
    cursor: pointer; display: flex; align-items: center; gap: 0.4rem;
    transition: all 0.15s; letter-spacing: 0.05em; position: relative; overflow: hidden;
  }
  .vote-btn::after {
    content: ''; position: absolute; inset: 0; background: rgba(204,0,0,0.08);
    transform: scaleX(0); transform-origin: left; transition: transform 0.2s ease;
  }
  .vote-btn:hover:not(:disabled) { border-color: var(--red); color: var(--red); }
  .vote-btn:hover:not(:disabled)::after { transform: scaleX(1); }
  .vote-btn.voted { border-color: var(--red); color: var(--red); cursor: default; }
  .vote-btn:disabled { cursor: default; }
  .vote-count { font-family: var(--sans); font-weight: 700; font-size: 0.75rem; }
  .vote-ripple { animation: voteRipple 0.4s ease; }
  @keyframes voteRipple { 0%{transform:scale(0.95)} 50%{transform:scale(1.05)} 100%{transform:scale(1)} }

  .issue-link {
    font-size: 0.6rem; color: var(--text-muted); text-decoration: none;
    letter-spacing: 0.05em; display: flex; align-items: center; gap: 0.3rem;
    transition: color 0.15s; white-space: nowrap;
  }
  .issue-link:hover { color: var(--text-dim); }

  footer {
    border-top: 1px solid var(--border); padding: 2rem;
    display: flex; flex-direction: column; align-items: center; gap: 1rem;
    text-align: center; background: var(--bg2);
  }
  .footer-text { font-size: 0.65rem; color: var(--text-muted); line-height: 1.8; letter-spacing: 0.03em; }
  .footer-link { color: var(--text-muted); text-decoration: none; border-bottom: 1px solid var(--border-bright); transition: all 0.15s; }
  .footer-link:hover { color: var(--red); border-color: var(--red); }
  .footer-brand { font-size: 0.6rem; color: var(--text-muted); display: flex; align-items: center; gap: 1rem; opacity: 0.5; }
  .footer-brand span { color: var(--red); }

  .toast {
    position: fixed; bottom: 2rem; right: 2rem; background: var(--bg3);
    border: 1px solid var(--red); color: var(--text); font-size: 0.7rem;
    padding: 0.75rem 1.25rem; letter-spacing: 0.05em; z-index: 999;
    transform: translateY(100px); opacity: 0;
    transition: all 0.3s cubic-bezier(0.34,1.56,0.64,1); pointer-events: none;
  }
  .toast.show { transform: translateY(0); opacity: 1; }

  @media(max-width:600px) {
    .hero-title { font-size: 2.4rem; }
    .grid { grid-template-columns: 1fr; }
    .header-right { display: none; }
  }
</style>
</head>
<body>

<header>
  <div class="header-left">
    <span class="logo-bracket">OHC / Red Hat</span>
    <div class="logo-sep"></div>
    <span class="header-title">Labs</span>
  </div>
  <div class="header-right">
    <div class="status-dot"></div>
    <a href="https://github.com/jodonnel/ohc-sap-demo/issues" target="_blank" class="header-link">Open Issues ‚Üó</a>
    <a href="index.html" class="header-link">‚Üê Back</a>
  </div>
</header>

<div class="votes-banner">
  <strong id="total-votes">‚Äî</strong>
  <span>total community votes cast across all experiments</span>
</div>

<div class="hero">
  <div class="hero-eyebrow">skunkworks / in progress / nothing guaranteed</div>
  <h1 class="hero-title">OHC<br><span class="accent">Labs.</span></h1>
  <p class="hero-desc">
    These are the experiments we're building toward SAP Insider and beyond.
    Vote for what you want to see demo'd. Every üëç tells us what matters.
    Every issue link goes straight to the build backlog.
  </p>
  <div class="hero-meta">
    <div class="hero-stat">
      <span class="hero-stat-num">10</span>
      <span class="hero-stat-label">experiments</span>
    </div>
    <div class="hero-stat">
      <span class="hero-stat-num">3</span>
      <span class="hero-stat-label">in flight</span>
    </div>
    <div class="hero-stat">
      <span class="hero-stat-num" id="hero-votes">‚Äî</span>
      <span class="hero-stat-label">votes cast</span>
    </div>
  </div>
</div>

<div class="filter-bar">
  <span class="filter-label">Filter:</span>
  <button class="filter-btn active" data-filter="all">All</button>
  <button class="filter-btn" data-filter="OpenShift">OpenShift</button>
  <button class="filter-btn" data-filter="EIC">EIC / BTP</button>
  <button class="filter-btn" data-filter="AI">Edge AI</button>
  <button class="filter-btn" data-filter="Security">Security / GRC</button>
  <button class="filter-btn" data-filter="IoT">IoT / Device</button>
</div>

<div class="grid" id="card-grid"></div>

<footer>
  <div class="footer-text">
    Built on <strong>Red Hat OpenShift</strong> ¬∑ Powered by <strong>SAP BTP</strong> ¬∑ Edge to Enterprise<br>
    OHC Labs is where ideas go before they become demos.<br>
    <a href="https://github.com/jodonnel/ohc-sap-demo/issues" target="_blank" class="footer-link">View all open issues on GitHub ‚Üó</a>
  </div>
  <div class="footer-brand">
    <span>OHC</span> / <span>Red Hat</span> / Zman Consulting / February 2026
  </div>
</footer>

<div class="toast" id="toast"></div>

<script>
const USE_CASES = [
  {
    num:"01", issue:41, demo:"present-piport.html",
    title:"PI/PO EOL Migration Factory",
    tagline:"The Dec 2027 deadline every SAP customer faces.",
    abstract:"SAP PI and PO reach end of mainstream maintenance December 31, 2027. Every enterprise running legacy middleware faces a mandatory migration to SAP Integration Suite. The OHC demo shows a live IDoc flow: badge tap ‚Üí goods receipt event ‚Üí EIC on OpenShift ‚Üí S/4HANA. Highest urgency, broadest reach in the portfolio.",
    tags:["OpenShift","EIC","BTP","RHEL","Ansible"],
    filters:["OpenShift","EIC"]
  },
  {
    num:"02", issue:42, demo:"present-grc-killchain.html",
    title:"3D-GRC Kill Chain",
    tagline:"Badge clone ‚Üí IT lateral ‚Üí OT shutdown. One story.",
    abstract:"Attackers exploit the seams between physical security, IT, and OT. The demo shows a contractor with a cloned badge: PACS detects the anomaly, SAP GRC correlates it with an active ERP credential, Ansible triggers an automated OT lockdown before the attacker reaches a PLC. No single vendor solves this. Red Hat is the enforcement spine.",
    tags:["OpenShift","Ansible","SAP GRC","RegScale","AlertEnterprise"],
    filters:["Security","OpenShift"]
  },
  {
    num:"03", issue:43, demo:"present-shopfloor.html",
    title:"Shop-Floor Visual Inspection ‚Üí SAP QM",
    tagline:"Camera sees defect. SAP creates inspection lot. Under 500ms.",
    abstract:"An AI inference model runs locally on an OpenShift edge node ‚Äî analyzing production line images, classifying defects, and posting CloudEvents to EIC. EIC routes to SAP QM, triggering an inspection lot and halting downstream production if needed. GPU-accelerated on RTX 3070 locally.",
    tags:["OpenShift AI","EIC","SAP QM","RHEL AI","NVIDIA"],
    filters:["AI","EIC","OpenShift"]
  },
  {
    num:"04", issue:44, demo:null,
    title:"Contractor Overcharge Detection",
    tagline:"Badge swipes don't lie. Invoices do.",
    abstract:"The OHC badge event pipeline already runs. The new layer: EIC routes batch swipe summaries to SAP Fieldglass, comparing hours claimed on invoices against physical access logs. Discrepancies auto-flag the timesheet for rejection. Minimal build, concrete ROI.",
    tags:["EIC","SAP Fieldglass","AlertEnterprise","Ansible","BTP"],
    filters:["Security","EIC","IoT"]
  },
  {
    num:"05", issue:45, demo:"present-openblue.html",
    title:"Johnson Controls OpenBlue ‚Üí SAP PM",
    tagline:"Chiller fault ‚Üí work order. $111B TAM.",
    abstract:"OpenBlue aggregates HVAC, lighting, and access data via BACnet/Modbus/OPC UA. A building fault flows through OpenShift-hosted EIC to SAP Plant Maintenance ‚Äî creating a work order automatically. OpenBlue currently runs on Azure, creating a direct OpenShift displacement conversation.",
    tags:["OpenShift","EIC","SAP PM","OpenBlue","Device Edge"],
    filters:["IoT","EIC","OpenShift"]
  },
  {
    num:"06", issue:60, demo:null,
    title:"Mercedes-Benz Connected Vehicle Relay",
    tagline:"Real OEM data. Kafka stream. No hardware retrofit.",
    abstract:"Mercedes-Benz publishes a production Fleet API ‚Äî a Kafka push stream delivering live vehicle telemetry (odometer, fuel, EV range, diagnostics, maintenance signals) from factory-fitted modules. OpenShift hosts a Kafka consumer that normalizes the stream into CloudEvents and routes via EIC to SAP PM/EAM. Dev sandbox via Mercedes Softcars ‚Äî no contract required.",
    tags:["Kafka","CloudEvents","EIC","SAP PM","OpenShift"],
    filters:["IoT","EIC","OpenShift"]
  },
  {
    num:"07", issue:47, demo:"present-mii.html",
    title:"MII/ME Coexistence Migration",
    tagline:"Run old and new side-by-side. No production downtime.",
    abstract:"MII and ME share the same Dec 2027 EOL as PI/PO ‚Äî but MES systems can't simply be switched off. The demo shows parallel routing: existing MII logic runs in a container on OpenShift Virtualization while new events simultaneously flow to SAP Digital Manufacturing. Migration happens in waves. No downtime.",
    tags:["OpenShift Virtualization","EIC","SAP DM","Ansible","RHEL"],
    filters:["OpenShift","EIC"]
  },
  {
    num:"08", issue:48, demo:"present-substation.html",
    title:"Energy Anomaly ‚Üí SAP EAM",
    tagline:"AI at the substation. Predict failure before the lineman gets hurt.",
    abstract:"An AI model on a Red Hat OpenShift edge node analyzes substation sensor data in real time ‚Äî detecting anomalies before equipment fails. When a threshold is crossed, a CloudEvent flows through EIC to SAP EAM, creating a predictive maintenance work order. Without correlated context, field crews are dispatched blind into dangerous situations.",
    tags:["OpenShift AI","Device Edge","EIC","SAP EAM","NERC CIP"],
    filters:["AI","IoT","EIC","Security"]
  },
  {
    num:"09", issue:49, demo:null,
    title:"Real Consumer IoT ‚Üí CloudEvents",
    tagline:"Jim's scale. Jim's watch. Same pipeline as a Ford PLC.",
    abstract:"A Withings weigh-in becomes a CloudEvent. A Garmin heart rate reading becomes a CloudEvent. Both flow through the same OpenShift pipeline as the badge scan the customer just watched. The architecture doesn't care what the nerve ending is. This is the limbic kill shot ‚Äî it makes the pattern viscerally real.",
    tags:["Device Edge","CloudEvents","BTP","EIC","OpenShift"],
    filters:["IoT","EIC"]
  },
  {
    num:"10", issue:50, demo:"present-blackjack.html",
    title:"Meta Glasses Blackjack",
    tagline:"Camera ‚Üí OpenShift ‚Üí BTP ‚Üí earpiece. 389ms. Nobody forgets this.",
    abstract:"The player wears Meta glasses. The glasses see the cards. The image posts to an OpenShift ingest endpoint. A strategy engine on BTP evaluates the hand and whispers the optimal play in 389ms. This is a demo-to-win weapon ‚Äî it proves closed-loop edge-to-enterprise AI in a scenario impossible to forget.",
    tags:["OpenShift AI","BTP","Edge Vision","CloudEvents","NVIDIA"],
    filters:["AI","IoT"]
  },
  {
    num:"11", issue:"job-coach", demo:"present-job-coach.html",
    title:"Meta Glasses Job Coach",
    tagline:"AI-powered independence for adults with IDD. Privacy-first edge AI.",
    abstract:"An AI job coach for adults with intellectual and developmental disabilities, running on Meta smart glasses at the edge. Three capabilities: step-by-step job task coaching learned with a DSP, real-time danger steering for unsafe situations, and social navigation prompts for restaurants and small talk. Privacy-first, edge-native, dignity-centered. Market: 5.4M adults with IDD in the US.",
    tags:["OpenShift AI","Device Edge","MicroShift","BTP","Meta Glasses"],
    filters:["AI","IoT","Edge"],
    repo:"https://github.com/jodonnel/job-coach"
  },
  {
    num:"12", issue:64, demo:null,
    title:"Meta Ray-Ban Workplace Monitor",
    tagline:"Wearable edge AI for workplace accessibility. Photo ‚Üí Claude ‚Üí guidance.",
    abstract:"Worker says 'Hey Meta, take a photo.' The glasses capture what they're looking at ‚Äî a pallet label, a pressure gauge, a safety panel. The image posts to an OpenShift ingest endpoint. Claude analyzes it and returns spoken guidance in under 400ms. Events log to SAP SuccessFactors as task completions. Edge AI that runs at the speed of work, on hardware people already wear.",
    tags:["OpenShift AI","Device Edge","Claude API","SAP SuccessFactors","Meta Glasses"],
    filters:["AI","IoT","Edge"]
  }
];

const GH_BASE = "https://github.com/jodonnel/ohc-sap-demo/issues/";

// Storage: localStorage primary, window.storage (kiosk env) as enhancement
async function getVotes(issue) {
  try {
    if (window.storage) { const r = await window.storage.get(`labs:votes:${issue}`, true); if (r) return parseInt(r.value)||0; }
  } catch {}
  return parseInt(localStorage.getItem(`labs:votes:${issue}`) || '0');
}
async function setVotes(issue, n) {
  localStorage.setItem(`labs:votes:${issue}`, String(n));
  try { if (window.storage) await window.storage.set(`labs:votes:${issue}`, String(n), true); } catch {}
}
async function hasVoted(issue) {
  try {
    if (window.storage) { const r = await window.storage.get(`labs:myvote:${issue}`, false); if (r) return true; }
  } catch {}
  return !!localStorage.getItem(`labs:myvote:${issue}`);
}
async function markVoted(issue) {
  localStorage.setItem(`labs:myvote:${issue}`, '1');
  try { if (window.storage) await window.storage.set(`labs:myvote:${issue}`, '1', false); } catch {}
}

function toast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2800);
}

async function updateTotals() {
  let total = 0;
  for (const uc of USE_CASES) total += await getVotes(uc.issue);
  document.getElementById('total-votes').textContent = total;
  document.getElementById('hero-votes').textContent = total;
}

function ghIcon() {
  return `<svg width="10" height="10" viewBox="0 0 16 16" fill="currentColor"><path d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"/><path fill-rule="evenodd" d="M8 0a8 8 0 100 16A8 8 0 008 0zM1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0z"/></svg>`;
}

async function renderCards() {
  const grid = document.getElementById('card-grid');
  grid.innerHTML = '';

  for (const uc of USE_CASES) {
    const votes = await getVotes(uc.issue);
    const voted = await hasVoted(uc.issue);

    const card = document.createElement('div');
    card.className = 'card';
    card.dataset.filters = uc.filters.join(',');

    card.innerHTML = `
      <div class="card-header">
        <span class="card-num">#${uc.num}</span>
        <div class="card-title-block">
          <div class="card-title">${uc.title}</div>
          <div class="card-tagline">${uc.tagline}</div>
        </div>
      </div>
      <div class="card-abstract">${uc.abstract}</div>
      <div class="card-tags">${uc.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
      <div class="card-footer">
        <button class="vote-btn${voted?' voted':''}" data-issue="${uc.issue}"${voted?' disabled':''}>
          <span>${voted?'‚úì':'‚Üë'}</span>
          <span class="vote-count" id="vc-${uc.issue}">${votes}</span>
          <span>${voted?'voted':'upvote'}</span>
        </button>
        ${uc.demo ? `<a href="${uc.demo}" class="issue-link" style="color:var(--red);border-color:var(--red)">‚ñ∂ demo ‚Üó</a>` : ''}
        <a href="${GH_BASE}${uc.issue}" target="_blank" class="issue-link">${ghIcon()} issue #${uc.issue} ‚Üó</a>
      </div>
    `;

    card.querySelector('.vote-btn').addEventListener('click', async function() {
      if (this.disabled) return;
      this.disabled = true;
      const cur = await getVotes(uc.issue);
      const next = cur + 1;
      await setVotes(uc.issue, next);
      await markVoted(uc.issue);
      this.classList.add('voted','vote-ripple');
      this.querySelector('span:first-child').textContent = '‚úì';
      document.getElementById(`vc-${uc.issue}`).textContent = next;
      this.querySelector('span:last-child').textContent = 'voted';
      setTimeout(() => this.classList.remove('vote-ripple'), 400);
      toast(`‚Üë voted for "${uc.title}"`);
      await updateTotals();
    });

    grid.appendChild(card);
  }

  await updateTotals();
}

// Filters
document.querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const f = btn.dataset.filter;
    document.querySelectorAll('.card').forEach(card => {
      card.classList.toggle('hidden', f !== 'all' && !card.dataset.filters.split(',').includes(f));
    });
  });
});

// Init ‚Äî always render with full voting UI
renderCards();
</script>
</body>
</html>
