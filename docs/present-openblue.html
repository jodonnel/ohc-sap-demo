<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OHC Presentation ‚Äî Johnson Controls OpenBlue √ó SAP PM</title>
<link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@300;400;700;900&family=Red+Hat+Mono:wght@400;700&family=Red+Hat+Text:wght@300;400;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #06090F; --surface: #0D1117; --border: #1C2333; --muted: #4E5D6C; --text: #F0F4F8;
  --green: #00D26A; --blue: #0070F2; --red: #EE0000;
  --red-glow: rgba(238,0,0,0.10);
  --amber: #F59E0B; --teal: #14B8A6;
}
* { margin:0; padding:0; box-sizing:border-box; }
html,body { height:100%; overflow:hidden; background:var(--bg); color:var(--text); font-family:'Red Hat Display',sans-serif; }

.deck { position:relative; width:100vw; height:100vh; }
.slide {
  position:absolute; inset:0; display:flex; flex-direction:column;
  align-items:center; justify-content:center; padding:60px 80px;
  opacity:0; pointer-events:none; transition:opacity 0.5s ease;
}
.slide.active { opacity:1; pointer-events:auto; }

/* Live pip */
.live-pip {
  position:fixed; bottom:24px; right:32px; z-index:100;
  background:var(--surface); border:1px solid var(--border); border-radius:12px;
  padding:10px 18px; display:flex; align-items:center; gap:12px;
  opacity:0; transition:opacity 0.4s;
}
.live-pip.visible { opacity:1; }
.live-pip .dot { width:8px; height:8px; border-radius:50%; background:var(--green); animation:pulse 2s infinite; }
.live-pip .count { font-family:'Red Hat Mono',monospace; font-size:16px; font-weight:700; color:var(--red); font-variant-numeric:tabular-nums; }
.live-pip .label { font-size:11px; color:var(--muted); }

/* Progress */
.progress { position:fixed; top:0; left:0; height:3px; z-index:200; background:linear-gradient(90deg,var(--red),var(--blue)); transition:width 0.3s; }
.slide-num { position:fixed; bottom:24px; left:50%; transform:translateX(-50%); z-index:100; font-family:'Red Hat Mono',monospace; font-size:12px; color:var(--muted); display:flex; align-items:center; gap:16px; } .nav-btn { background:none; border:1px solid var(--border,#253040); border-radius:4px; color:var(--muted,#8B98A5); font-family:'Red Hat Mono',monospace; font-size:13px; padding:6px 14px; cursor:pointer; transition:border-color 0.15s,color 0.15s; } .nav-btn:hover { border-color:var(--text,#E8EDF2); color:var(--text,#E8EDF2); } .nav-btn:disabled { opacity:0.2; cursor:default; }

/* Back link */
.back-link {
  position:fixed; top:16px; left:24px; z-index:200;
  font-size:12px; color:var(--muted); text-decoration:none;
  font-family:'Red Hat Mono',monospace; letter-spacing:1px;
  transition:color 0.2s;
}
.back-link:hover { color:var(--text); }

/* Typography */
.mega { font-size:clamp(3rem,8vw,6rem); font-weight:900; line-height:1.05; }
.big { font-size:clamp(2rem,5vw,3.5rem); font-weight:700; line-height:1.15; }
.medium { font-size:clamp(1.2rem,3vw,1.8rem); font-weight:300; line-height:1.4; font-family:'Red Hat Text',sans-serif; }
.small { font-size:14px; color:var(--muted); font-family:'Red Hat Text',sans-serif; }
.mono { font-family:'Red Hat Mono',monospace; }
.red { color:var(--red); } .blue { color:var(--blue); } .green { color:var(--green); }
.amber { color:var(--amber); } .muted { color:var(--muted); } .center { text-align:center; }

.brand { display:flex; align-items:center; gap:20px; margin-bottom:32px; }
.brand .rh { color:var(--red); font-size:14px; font-weight:700; letter-spacing:2px; }
.brand .sep { color:var(--muted); font-size:20px; }
.brand .sap { color:var(--blue); font-size:14px; font-weight:700; letter-spacing:2px; }
.brand .jci { color:var(--amber); font-size:14px; font-weight:700; letter-spacing:2px; }

.spacer { height:24px; } .spacer-lg { height:48px; }

/* Points */
.points { list-style:none; margin-top:24px; max-width:900px; width:100%; }
.points li { font-size:18px; font-weight:300; padding:12px 0; border-bottom:1px solid var(--border); display:flex; align-items:flex-start; gap:14px; font-family:'Red Hat Text',sans-serif; line-height:1.4; }
.points li .icon { font-size:20px; flex-shrink:0; margin-top:1px; }

/* Architecture flow */
.arch-flow {
  display:flex; align-items:center; gap:0; margin-top:32px;
  width:100%; max-width:960px; flex-wrap:nowrap;
}
.arch-node {
  flex:1; background:var(--surface); border:1px solid var(--border); border-radius:14px;
  padding:20px 16px; text-align:center;
}
.arch-node.highlight-red { border-color:var(--red); box-shadow:0 0 24px var(--red-glow); }
.arch-node.highlight-green { border-color:var(--green); box-shadow:0 0 24px rgba(0,210,106,0.12); }
.arch-node .node-icon { font-size:36px; margin-bottom:10px; }
.arch-node .node-title { font-size:15px; font-weight:700; margin-bottom:6px; }
.arch-node .node-sub { font-size:12px; color:var(--muted); font-family:'Red Hat Mono',monospace; }
.arch-arrow {
  font-size:28px; color:var(--red); flex-shrink:0;
  padding:0 12px; font-weight:700;
}

/* Trigger zone */
.trigger-zone {
  width:100%; max-width:760px; background:var(--surface);
  border:1px solid var(--border); border-radius:16px; padding:28px 32px;
  margin-top:24px;
}
.payload-preview {
  background:#06090F; border:1px solid var(--border); border-radius:10px;
  padding:16px 20px; font-family:'Red Hat Mono',monospace; font-size:13px;
  line-height:1.8; margin-bottom:20px;
}
.payload-preview .key { color:var(--muted); }
.payload-preview .val-str { color:var(--green); }
.payload-preview .val-kw { color:var(--red); }

.fire-btn {
  display:block; width:100%; padding:16px 0;
  background:var(--red); color:#fff; border:none; border-radius:10px;
  font-family:'Red Hat Display',sans-serif; font-size:20px; font-weight:700;
  cursor:pointer; letter-spacing:1px;
  transition:background 0.15s, transform 0.1s, box-shadow 0.15s;
  box-shadow:0 0 24px var(--red-glow);
}
.fire-btn:hover { background:#cc0000; box-shadow:0 0 36px rgba(238,0,0,0.25); }
.fire-btn:active { transform:scale(0.98); }
.fire-btn:disabled { background:#3a1a1a; color:var(--muted); cursor:not-allowed; box-shadow:none; }

.result-box {
  margin-top:16px; padding:14px 18px; border-radius:10px;
  background:rgba(0,210,106,0.06); border:1px solid rgba(0,210,106,0.2);
  font-family:'Red Hat Mono',monospace; font-size:14px; color:var(--green);
  min-height:48px; display:none;
}
.result-box.visible { display:block; }
.result-box.error { background:rgba(238,0,0,0.06); border-color:rgba(238,0,0,0.2); color:var(--red); }

/* Stats grid */
.stat-grid {
  display:grid; grid-template-columns:repeat(3,1fr); gap:24px;
  width:100%; max-width:900px; margin-top:32px;
}
.stat-card {
  background:var(--surface); border:1px solid var(--border); border-radius:14px;
  padding:28px 24px; text-align:center;
}
.stat-card .stat-val { font-family:'Red Hat Mono',monospace; font-size:clamp(1.4rem,3vw,2.2rem); font-weight:700; color:var(--amber); margin-bottom:8px; line-height:1.1; }
.stat-card .stat-label { font-size:12px; color:var(--muted); letter-spacing:1px; text-transform:uppercase; font-family:'Red Hat Text',sans-serif; line-height:1.5; }

/* Subtle ambient glow */
.glow-bg::before {
  content:''; position:absolute; top:40%; left:50%; width:800px; height:800px;
  transform:translate(-50%,-50%);
  background:radial-gradient(circle,var(--red-glow) 0%,transparent 70%);
  pointer-events:none; z-index:-1;
}

@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.4} }
@keyframes fadeUp { from{opacity:0;transform:translateY(30px)} to{opacity:1;transform:translateY(0)} }
.fade-up { animation:fadeUp 0.6s ease-out both; }
.delay-1 { animation-delay:0.15s; } .delay-2 { animation-delay:0.3s; }
.delay-3 { animation-delay:0.45s; } .delay-4 { animation-delay:0.6s; }
.delay-5 { animation-delay:0.75s; }

/* Mobile */
@media (max-width:768px) {
  .slide { padding:24px 20px; }
  .mega { font-size:clamp(2rem,10vw,3.5rem); }
  .big { font-size:clamp(1.4rem,6vw,2.2rem); }
  .medium { font-size:clamp(1rem,4vw,1.3rem); }
  .arch-flow { flex-direction:column; gap:8px; }
  .arch-arrow { transform:rotate(90deg); padding:4px 0; }
  .stat-grid { grid-template-columns:1fr; gap:12px; }
  .stat-card { padding:16px; }
  .trigger-zone { padding:16px; }
  .payload-preview { font-size:11px; }
  .brand { margin-bottom:16px; }
  .spacer-lg { height:24px; }
  .live-pip { bottom:10px; right:10px; padding:6px 10px; }
  .slide-num { bottom:10px; font-size:10px; }
  .points li { font-size:14px; padding:8px 0; }
}
</style>
</head>
<body>

<div class="progress" id="progress"></div>
<div class="slide-num"><button class="nav-btn" id="prevBtn" onclick="if(current>1)showSlide(--current)">‚Üê</button><span id="slideNum"></span><button class="nav-btn" id="nextBtn" onclick="if(current<total)showSlide(++current)">‚Üí</button></div>
<a href="/present-index" class="back-link">&#8592; index</a>

<div class="live-pip" id="livePip">
  <div class="dot"></div>
  <span class="count" id="pipCount">0</span>
  <span class="label">events</span>
</div>

<div class="deck">

  <!-- SLIDE 1 ‚Äî HOOK -->
  <div class="slide active glow-bg" data-slide="1">
    <div class="brand fade-up">
      <span class="rh">RED HAT</span>
      <span class="sep">√ó</span>
      <span class="sap">SAP</span>
      <span class="sep">√ó</span>
      <span class="jci">JOHNSON CONTROLS</span>
    </div>
    <div class="mega center fade-up delay-1">Chiller fault<br><span class="red">‚Üí</span> SAP work order.</div>
    <div class="spacer"></div>
    <div class="medium center muted fade-up delay-2">$111B TAM. Nobody's connected it to SAP. Until now.</div>
  </div>

  <!-- SLIDE 2 ‚Äî THE PROBLEM -->
  <div class="slide" data-slide="2">
    <div class="big center fade-up">Buildings generate millions of events.<br><span class="red">SAP never sees them.</span></div>
    <div class="spacer"></div>
    <ul class="points fade-up delay-1">
      <li><span class="icon">üè¢</span><span>Johnson Controls OpenBlue aggregates HVAC, lighting, access, and sensors via BACnet / Modbus / OPC UA</span></li>
      <li><span class="icon">üìÑ</span><span>A chiller fault creates a maintenance ticket ‚Äî in OpenBlue, on paper, in a spreadsheet</span></li>
      <li><span class="icon">üóÑÔ∏è</span><span>SAP Plant Maintenance has the asset history, the SLAs, the parts inventory ‚Äî but it's disconnected</span></li>
      <li><span class="icon">‚ö†Ô∏è</span><span>Every missed automatic work order is manual labor, delayed response, compliance risk</span></li>
    </ul>
  </div>

  <!-- SLIDE 3 ‚Äî THE ARCHITECTURE -->
  <div class="slide glow-bg" data-slide="3">
    <div class="big center fade-up">OpenBlue <span class="red">‚Üí</span> EIC <span class="red">‚Üí</span> SAP PM. <span class="green">Automated.</span></div>
    <div class="arch-flow fade-up delay-1">
      <div class="arch-node">
        <div class="node-icon">üè¢</div>
        <div class="node-title">OpenBlue BMS</div>
        <div class="node-sub">BACnet / Modbus / OPC UA</div>
      </div>
      <div class="arch-arrow">‚Üí</div>
      <div class="arch-node highlight-red">
        <div class="node-icon">üîÑ</div>
        <div class="node-title red">EIC on OpenShift</div>
        <div class="node-sub">CloudEvents normalization</div>
      </div>
      <div class="arch-arrow">‚Üí</div>
      <div class="arch-node highlight-green">
        <div class="node-icon">üìã</div>
        <div class="node-title green">SAP PM</div>
        <div class="node-sub">Work order created</div>
      </div>
    </div>
    <div class="spacer"></div>
    <div class="small center fade-up delay-2">OpenBlue currently runs on Azure. This demo runs on OpenShift. That's the conversation.</div>
  </div>

  <!-- SLIDE 4 ‚Äî FIRE THE EVENT -->
  <div class="slide" data-slide="4">
    <div class="big center fade-up">Trigger a building fault.</div>
    <div class="medium center muted fade-up delay-1">Chiller TEMP_HIGH <span class="red">‚Üí</span> SAP PM work order in real time.</div>
    <div class="trigger-zone fade-up delay-2">
      <div class="payload-preview">
        <span class="key">asset_id:    </span><span class="val-str">"CHILLER-01"</span><br>
        <span class="key">fault_code:  </span><span class="val-kw">TEMP_HIGH</span><br>
        <span class="key">zone:        </span><span class="val-str">"Building B ‚Äî Mechanical Room"</span><br>
        <span class="key">severity:    </span><span class="val-kw">critical</span>
      </div>
      <button class="fire-btn" id="fireBtn" onclick="fireFault()">&#9889; Fire Fault</button>
      <div class="result-box" id="faultResult"></div>
    </div>
  </div>

  <!-- SLIDE 5 ‚Äî THE BUSINESS CASE -->
  <div class="slide glow-bg" data-slide="5">
    <div class="big center fade-up">Every OpenBlue customer is<br>an <span class="red">OpenShift</span> conversation.</div>
    <div class="stat-grid fade-up delay-1">
      <div class="stat-card">
        <div class="stat-val">$111B‚Äì143B</div>
        <div class="stat-label">Johnson Controls addressable market</div>
      </div>
      <div class="stat-card">
        <div class="stat-val">$4.1B</div>
        <div class="stat-label">JCI security portfolio ‚Äî CCURE PACS partnership</div>
      </div>
      <div class="stat-card">
        <div class="stat-val amber">Azure ‚Üí OCP</div>
        <div class="stat-label">OpenBlue today runs on Azure ‚Äî OpenShift displacement conversation</div>
      </div>
    </div>
  </div>

  <!-- SLIDE 6 ‚Äî CLOSE -->
  <div class="slide glow-bg" data-slide="6">
    <div class="mega center fade-up">Building fault.<br>Work order. <span class="green">Done.</span></div>
    <div class="spacer-lg"></div>
    <div class="medium center muted fade-up delay-2">The same architecture connects<br>a chiller in Chicago to a PLC in Munich.</div>
  </div>

</div><!-- /deck -->

<script>
const slides = document.querySelectorAll('.slide');
const totalSlides = slides.length;
let current = 0;

const progressEl = document.getElementById('progress');
const slideNumEl = document.getElementById('slideNum');
const livePip = document.getElementById('livePip');
const pipCountEl = document.getElementById('pipCount');

function goTo(n) {
  if (n < 0 || n >= totalSlides) return;
  slides[current].classList.remove('active');
  current = n;
  slides[current].classList.add('active');
  progressEl.style.width = ((current+1)/totalSlides*100)+'%';
  slideNumEl.innerText = (current+1)+' / '+totalSlides;
  livePip.classList.toggle('visible', current >= 3);

  fetch('/ingest', {
    method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({specversion:'1.0', type:'presenter.slide_change', source:'present-openblue',
      data:{slide:current+1, total:totalSlides, title:slides[current].dataset.slide}})
  }).catch(()=>{});
}
function next() { goTo(current+1); }
function prev() { goTo(current-1); }

// Keyboard
document.addEventListener('keydown', e => {
  if (e.key==='ArrowRight'||e.key===' '||e.key==='PageDown') { e.preventDefault(); next(); }
  if (e.key==='ArrowLeft'||e.key==='PageUp') { e.preventDefault(); prev(); }
  if (e.key==='Home') { e.preventDefault(); goTo(0); }
  if (e.key==='End') { e.preventDefault(); goTo(totalSlides-1); }
  if (e.key==='f'||e.key==='F') {
    if (!document.fullscreenElement) document.documentElement.requestFullscreen();
    else document.exitFullscreen();
  }
});

// Touch swipe
let touchStartX = 0;
let touchStartY = 0;
document.addEventListener('touchstart', e => {
  touchStartX = e.touches[0].clientX;
  touchStartY = e.touches[0].clientY;
}, {passive:true});
document.addEventListener('touchend', e => {
  const dx = touchStartX - e.changedTouches[0].clientX;
  const dy = touchStartY - e.changedTouches[0].clientY;
  if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 50) {
    dx > 0 ? next() : prev();
  }
}, {passive:true});

// Click nav (left 20% back, rest forward)
document.addEventListener('click', e => {
  if (e.target.closest('a,button,.trigger-zone')) return;
  if (e.clientX < window.innerWidth * 0.2) prev();
  else next();
});

// SSE for live pip
let eventCount = 0;
function connectSSE() {
  try {
    const es = new EventSource('/events');
    es.onmessage = e => {
      const d = JSON.parse(e.data);
      eventCount = d.count || (eventCount+1);
      pipCountEl.innerText = eventCount.toLocaleString();
    };
    es.onerror = () => { es.close(); setTimeout(connectSSE, 3000); };
  } catch(e) {}
}

// Fire fault button
async function fireFault() {
  const btn = document.getElementById('fireBtn');
  const resultBox = document.getElementById('faultResult');
  btn.disabled = true;
  btn.textContent = 'Firing‚Ä¶';
  resultBox.className = 'result-box';
  resultBox.style.display = 'none';

  try {
    const resp = await fetch('/openblue/fault', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({
        asset_id: 'CHILLER-01',
        fault_code: 'TEMP_HIGH',
        zone: 'Building B ‚Äî Mechanical Room',
        severity: 'critical'
      })
    });
    const data = await resp.json();
    resultBox.className = 'result-box visible';
    const wo = data.work_order || data.workOrder || data.work_order_id || data.id || JSON.stringify(data);
    resultBox.textContent = 'Work order created: ' + wo;
    eventCount++;
    pipCountEl.innerText = eventCount.toLocaleString();
  } catch(err) {
    resultBox.className = 'result-box visible error';
    resultBox.textContent = 'Error: ' + (err.message || 'request failed');
  } finally {
    btn.disabled = false;
    btn.innerHTML = '&#9889; Fire Fault';
  }
}

connectSSE();
goTo(0);
</script>
</body>
</html>
